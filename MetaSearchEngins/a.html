<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh-cn">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<title>java发送http的get、post请求 - 上校 - 博客园</title>
<link type="text/css" rel="stylesheet" href="/bundles/blog-common.css?v=gdNkSiQMyBMkpTeO1ex9qW-60UbMszQItnCUpBAT3LQ1"/>
<link id="MainCss" type="text/css" rel="stylesheet" href="http://common.cnblogs.com/Skins/coffee/style.css?id=20140110"/>
<link title="RSS" type="application/rss+xml" rel="alternate" href="http://www.cnblogs.com/zhuawang/rss"/>
<link title="RSD" type="application/rsd+xml" rel="EditURI" href="http://www.cnblogs.com/zhuawang/rsd.xml"/>
<link type="application/wlwmanifest+xml" rel="wlwmanifest" href="http://www.cnblogs.com/zhuawang/wlwmanifest.xml"/>
<script src="http://common.cnblogs.com/script/jquery.js" type="text/javascript"></script>  
<script type="text/javascript">var currentBlogApp = 'zhuawang', cb_enable_mathjax=false;</script>
<script src="/bundles/blog-common.js?v=YE4Yf2v1HpAVZLFA45p-EjGRYWlmADxKPN4_Gi-5S9Y1" type="text/javascript"></script>
</head>
<body>
<a name="top"></a>

<!--done-->
<div id="home">
<div id="header">
	<div id="blogTitle">
	<a id="lnkBlogLogo" href="http://www.cnblogs.com/zhuawang/"><img id="blogLogo" src="/Skins/custom/images/logo.gif" alt="返回主页" /></a>			
		
<!--done-->
<h1><a id="Header1_HeaderTitle" class="headermaintitle" href="http://www.cnblogs.com/zhuawang/">zhuawang's blog</a></h1>
<h2><br><h1>淡泊以明志,宁静以致远</h1></h2>



		
	</div><!--end: blogTitle 博客的标题和副标题 -->
</div><!--end: header 头部 -->

<div id="main">
	<div id="mainContent">
	<div class="forFlow">
		<div id="navigator">
			
<!--done-->
			<ul id="navList">
				<li><a id="MyLinks1_HomeLink" class="menu" href="http://www.cnblogs.com/">博客园</a></li>
				<li><a id="MyLinks1_IngLink" class="menu" href="http://home.cnblogs.com/ing/">闪存</a></li>
				<li><a id="MyLinks1_MyHomeLink" class="menu" href="http://www.cnblogs.com/zhuawang/">首页</a></li>
				<li><a id="MyLinks1_NewPostLink" class="menu" rel="nofollow" href="http://i.cnblogs.com/EditPosts.aspx?opt=1">新随笔</a></li>
				<li><a id="MyLinks1_ContactLink" accesskey="9" class="menu" rel="nofollow" href="http://space.cnblogs.com/msg/send/%e4%b8%8a%e6%a0%a1">联系</a></li>
				<li><a id="MyLinks1_Admin" class="menu" rel="nofollow" href="http://i.cnblogs.com/">管理</a></li>
				<li><a id="MyLinks1_Syndication" class="menu" href="http://www.cnblogs.com/zhuawang/rss">订阅</a>
				<a id="MyLinks1_XMLLink" class="aHeaderXML" href="http://www.cnblogs.com/zhuawang/rss"><img src="http://www.cnblogs.com/images/xml.gif" alt="订阅" /></a></li>
			</ul>


			<div class="blogStats">
				
				
<!--done-->
随笔- 479&nbsp;
文章- 0&nbsp;
评论- 100&nbsp;

				
			</div><!--end: blogStats -->
		</div><!--end: navigator 博客导航栏 -->
		

<!--done-->
<div id="topics">
	<div class = "post">
		<h1 class = "postTitle">
			<a id="cb_post_title_url" class="postTitle2" href="http://www.cnblogs.com/zhuawang/archive/2012/12/08/2809380.html">java发送http的get、post请求</a>
		</h1>
		<div class="clear"></div>
		<div class="postBody">
			<div id="cnblogs_post_body"><p>Http请求类</p>
<div class="cnblogs_code">
<pre><span style="color: #000000;">package wzh.Http;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.PrintWriter;
import java.net.URL;
import java.net.URLConnection;
import java.util.List;
import java.util.Map;

</span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span><span style="color: #000000;"> HttpRequest {
    </span><span style="color: #008000;">/*</span><span style="color: #008000;">*
     * 向指定URL发送GET方法的请求
     * 
     * @param url
     *            发送请求的URL
     * @param param
     *            请求参数，请求参数应该是 name1=value1&amp;name2=value2 的形式。
     * @return URL 所代表远程资源的响应结果
     </span><span style="color: #008000;">*/</span>
    <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">static</span><span style="color: #000000;"> String sendGet(String url, String param) {
        String result </span>= <span style="color: #800000;">""</span><span style="color: #000000;">;
        BufferedReader </span><span style="color: #0000ff;">in</span> = <span style="color: #0000ff;">null</span><span style="color: #000000;">;
        </span><span style="color: #0000ff;">try</span><span style="color: #000000;"> {
            String urlNameString </span>= url + <span style="color: #800000;">"</span><span style="color: #800000;">?</span><span style="color: #800000;">"</span> +<span style="color: #000000;"> param;
            URL realUrl </span>= <span style="color: #0000ff;">new</span><span style="color: #000000;"> URL(urlNameString);
            </span><span style="color: #008000;">//</span><span style="color: #008000;"> 打开和URL之间的连接</span>
            URLConnection connection =<span style="color: #000000;"> realUrl.openConnection();
            </span><span style="color: #008000;">//</span><span style="color: #008000;"> 设置通用的请求属性</span>
            connection.setRequestProperty(<span style="color: #800000;">"</span><span style="color: #800000;">accept</span><span style="color: #800000;">"</span>, <span style="color: #800000;">"</span><span style="color: #800000;">*/*</span><span style="color: #800000;">"</span><span style="color: #000000;">);
            connection.setRequestProperty(</span><span style="color: #800000;">"</span><span style="color: #800000;">connection</span><span style="color: #800000;">"</span>, <span style="color: #800000;">"</span><span style="color: #800000;">Keep-Alive</span><span style="color: #800000;">"</span><span style="color: #000000;">);
            connection.setRequestProperty(</span><span style="color: #800000;">"</span><span style="color: #800000;">user-agent</span><span style="color: #800000;">"</span><span style="color: #000000;">,
                    </span><span style="color: #800000;">"</span><span style="color: #800000;">Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1;SV1)</span><span style="color: #800000;">"</span><span style="color: #000000;">);
            </span><span style="color: #008000;">//</span><span style="color: #008000;"> 建立实际的连接</span>
<span style="color: #000000;">            connection.connect();
            </span><span style="color: #008000;">//</span><span style="color: #008000;"> 获取所有响应头字段</span>
            Map&lt;String, List&lt;String&gt;&gt; map =<span style="color: #000000;"> connection.getHeaderFields();
            </span><span style="color: #008000;">//</span><span style="color: #008000;"> 遍历所有的响应头字段</span>
            <span style="color: #0000ff;">for</span><span style="color: #000000;"> (String key : map.keySet()) {
                System.</span><span style="color: #0000ff;">out</span>.println(key + <span style="color: #800000;">"</span><span style="color: #800000;">---&gt;</span><span style="color: #800000;">"</span> + map.<span style="color: #0000ff;">get</span><span style="color: #000000;">(key));
            }
            </span><span style="color: #008000;">//</span><span style="color: #008000;"> 定义 BufferedReader输入流来读取URL的响应</span>
            <span style="color: #0000ff;">in</span> = <span style="color: #0000ff;">new</span> BufferedReader(<span style="color: #0000ff;">new</span><span style="color: #000000;"> InputStreamReader(
                    connection.getInputStream()));
            String line;
            </span><span style="color: #0000ff;">while</span> ((line = <span style="color: #0000ff;">in</span>.readLine()) != <span style="color: #0000ff;">null</span><span style="color: #000000;">) {
                result </span>+=<span style="color: #000000;"> line;
            }
        } </span><span style="color: #0000ff;">catch</span><span style="color: #000000;"> (Exception e) {
            System.</span><span style="color: #0000ff;">out</span>.println(<span style="color: #800000;">"</span><span style="color: #800000;">发送GET请求出现异常！</span><span style="color: #800000;">"</span> +<span style="color: #000000;"> e);
            e.printStackTrace();
        }
        </span><span style="color: #008000;">//</span><span style="color: #008000;"> 使用finally块来关闭输入流</span>
        <span style="color: #0000ff;">finally</span><span style="color: #000000;"> {
            </span><span style="color: #0000ff;">try</span><span style="color: #000000;"> {
                </span><span style="color: #0000ff;">if</span> (<span style="color: #0000ff;">in</span> != <span style="color: #0000ff;">null</span><span style="color: #000000;">) {
                    </span><span style="color: #0000ff;">in</span><span style="color: #000000;">.close();
                }
            } </span><span style="color: #0000ff;">catch</span><span style="color: #000000;"> (Exception e2) {
                e2.printStackTrace();
            }
        }
        </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> result;
    }

    </span><span style="color: #008000;">/*</span><span style="color: #008000;">*
     * 向指定 URL 发送POST方法的请求
     * 
     * @param url
     *            发送请求的 URL
     * @param param
     *            请求参数，请求参数应该是 name1=value1&amp;name2=value2 的形式。
     * @return 所代表远程资源的响应结果
     </span><span style="color: #008000;">*/</span>
    <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">static</span><span style="color: #000000;"> String sendPost(String url, String param) {
        PrintWriter </span><span style="color: #0000ff;">out</span> = <span style="color: #0000ff;">null</span><span style="color: #000000;">;
        BufferedReader </span><span style="color: #0000ff;">in</span> = <span style="color: #0000ff;">null</span><span style="color: #000000;">;
        String result </span>= <span style="color: #800000;">""</span><span style="color: #000000;">;
        </span><span style="color: #0000ff;">try</span><span style="color: #000000;"> {
            URL realUrl </span>= <span style="color: #0000ff;">new</span><span style="color: #000000;"> URL(url);
            </span><span style="color: #008000;">//</span><span style="color: #008000;"> 打开和URL之间的连接</span>
            URLConnection conn =<span style="color: #000000;"> realUrl.openConnection();
            </span><span style="color: #008000;">//</span><span style="color: #008000;"> 设置通用的请求属性</span>
            conn.setRequestProperty(<span style="color: #800000;">"</span><span style="color: #800000;">accept</span><span style="color: #800000;">"</span>, <span style="color: #800000;">"</span><span style="color: #800000;">*/*</span><span style="color: #800000;">"</span><span style="color: #000000;">);
            conn.setRequestProperty(</span><span style="color: #800000;">"</span><span style="color: #800000;">connection</span><span style="color: #800000;">"</span>, <span style="color: #800000;">"</span><span style="color: #800000;">Keep-Alive</span><span style="color: #800000;">"</span><span style="color: #000000;">);
            conn.setRequestProperty(</span><span style="color: #800000;">"</span><span style="color: #800000;">user-agent</span><span style="color: #800000;">"</span><span style="color: #000000;">,
                    </span><span style="color: #800000;">"</span><span style="color: #800000;">Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1;SV1)</span><span style="color: #800000;">"</span><span style="color: #000000;">);
            </span><span style="color: #008000;">//</span><span style="color: #008000;"> 发送POST请求必须设置如下两行</span>
            conn.setDoOutput(<span style="color: #0000ff;">true</span><span style="color: #000000;">);
            conn.setDoInput(</span><span style="color: #0000ff;">true</span><span style="color: #000000;">);
            </span><span style="color: #008000;">//</span><span style="color: #008000;"> 获取URLConnection对象对应的输出流</span>
            <span style="color: #0000ff;">out</span> = <span style="color: #0000ff;">new</span><span style="color: #000000;"> PrintWriter(conn.getOutputStream());
            </span><span style="color: #008000;">//</span><span style="color: #008000;"> 发送请求参数</span>
            <span style="color: #0000ff;">out</span><span style="color: #000000;">.print(param);
            </span><span style="color: #008000;">//</span><span style="color: #008000;"> flush输出流的缓冲</span>
            <span style="color: #0000ff;">out</span><span style="color: #000000;">.flush();
            </span><span style="color: #008000;">//</span><span style="color: #008000;"> 定义BufferedReader输入流来读取URL的响应</span>
            <span style="color: #0000ff;">in</span> = <span style="color: #0000ff;">new</span><span style="color: #000000;"> BufferedReader(
                    </span><span style="color: #0000ff;">new</span><span style="color: #000000;"> InputStreamReader(conn.getInputStream()));
            String line;
            </span><span style="color: #0000ff;">while</span> ((line = <span style="color: #0000ff;">in</span>.readLine()) != <span style="color: #0000ff;">null</span><span style="color: #000000;">) {
                result </span>+=<span style="color: #000000;"> line;
            }
        } </span><span style="color: #0000ff;">catch</span><span style="color: #000000;"> (Exception e) {
            System.</span><span style="color: #0000ff;">out</span>.println(<span style="color: #800000;">"</span><span style="color: #800000;">发送 POST 请求出现异常！</span><span style="color: #800000;">"</span>+<span style="color: #000000;">e);
            e.printStackTrace();
        }
        </span><span style="color: #008000;">//</span><span style="color: #008000;">使用finally块来关闭输出流、输入流</span>
        <span style="color: #0000ff;">finally</span><span style="color: #000000;">{
            </span><span style="color: #0000ff;">try</span><span style="color: #000000;">{
                </span><span style="color: #0000ff;">if</span>(<span style="color: #0000ff;">out</span>!=<span style="color: #0000ff;">null</span><span style="color: #000000;">){
                    </span><span style="color: #0000ff;">out</span><span style="color: #000000;">.close();
                }
                </span><span style="color: #0000ff;">if</span>(<span style="color: #0000ff;">in</span>!=<span style="color: #0000ff;">null</span><span style="color: #000000;">){
                    </span><span style="color: #0000ff;">in</span><span style="color: #000000;">.close();
                }
            }
            </span><span style="color: #0000ff;">catch</span><span style="color: #000000;">(IOException ex){
                ex.printStackTrace();
            }
        }
        </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> result;
    }    
}</span></pre>
</div>
<p>&nbsp;调用方法：</p>
<div class="cnblogs_code">
<pre>    <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> main(String[] args) {
        </span><span style="color: #008000;">//</span><span style="color: #008000;">发送 GET 请求</span>
        String s=HttpRequest.sendGet(<span style="color: #800000;">"</span><span style="color: #800000;">http://localhost:6144/Home/RequestString</span><span style="color: #800000;">"</span>, <span style="color: #800000;">"</span><span style="color: #800000;">key=123&amp;v=456</span><span style="color: #800000;">"</span><span style="color: #000000;">);
        System.</span><span style="color: #0000ff;">out</span><span style="color: #000000;">.println(s);
        
        </span><span style="color: #008000;">//</span><span style="color: #008000;">发送 POST 请求</span>
        String sr=HttpRequest.sendPost(<span style="color: #800000;">"</span><span style="color: #800000;">http://localhost:6144/Home/RequestPostString</span><span style="color: #800000;">"</span>, <span style="color: #800000;">"</span><span style="color: #800000;">key=123&amp;v=456</span><span style="color: #800000;">"</span><span style="color: #000000;">);
        System.</span><span style="color: #0000ff;">out</span><span style="color: #000000;">.println(sr);
    }</span></pre>
</div>
<p>&nbsp;</p></div><div id="MySignature"></div>
<div class="clear"></div>
<div id="blog_post_info_block">
<div id="blog_post_info">
</div>
<div class="clear"></div>
<div id="post_next_prev"></div>
</div>


		</div>
		<div class = "postDesc">posted @ <span id="post-date">2012-12-08 23:33</span> <a href='http://www.cnblogs.com/zhuawang/'>上校</a> 阅读(<span id="post_view_count">...</span>) 评论(<span id="post_comment_count">...</span>)  <a href ="http://i.cnblogs.com/EditPosts.aspx?postid=2809380" rel="nofollow">编辑</a> <a href="#" onclick="AddToWz(2809380);return false;">收藏</a></div>
	</div>
	<script type="text/javascript">var allowComments=true,isLogined=false,cb_blogId=25488,cb_entryId=2809380,cb_blogApp=currentBlogApp,cb_blogUserGuid='b46f3d0b-63cf-dd11-9e4d-001cf0cd104b',cb_entryCreatedDate='2012/12/8 23:33:00';loadViewCount(cb_entryId);</script>
	
</div><!--end: topics 文章、评论容器-->
<a name="!comments"></a><div id="blog-comments-placeholder"></div><script type="text/javascript">var commentManager = new blogCommentManager();commentManager.renderComments(0);</script>
<div id="comment_form" class="commentform">
<a name="commentform"></a>
<div id="divCommentShow"></div>
<div id="comment_nav"><span id="span_refresh_tips"></span><a href="javascript:void(0);" id="lnk_RefreshComments" onclick="return RefreshCommentList();">刷新评论</a><a href="#" onclick="return RefreshPage();">刷新页面</a><a href="#top">返回顶部</a></div>
<div id="comment_form_container"></div>
<div class="ad_text_commentbox" id="ad_text_under_commentbox"></div>
<div id="site_nav_under"><a href="http://www.cnblogs.com/" target="_blank" title="程序员的网上家园">博客园首页</a><a href="http://q.cnblogs.com/" target="_blank" title="程序员问答社区">博问</a><a href="http://news.cnblogs.com/" target="_blank" title="IT新闻">新闻</a><a href="http://home.cnblogs.com/ing/" target="_blank">闪存</a><a href="http://job.cnblogs.com/" target="_blank">程序员招聘</a><a href="http://kb.cnblogs.com/" target="_blank">知识库</a></div>
<div id="ad_under_post_holder"></div>
<script type="text/javascript">
var enableGoogleAd = true;
var googletag = googletag || {};
googletag.cmd = googletag.cmd || [];
fixPostBodyFormat();
loadAdUnderPost();
</script>
<div id="HistoryToday" class="c_ad_block"></div>
<script type="text/javascript">
loadBlogSignature();
LoadPostInfoBlock(cb_blogId, cb_entryId, cb_blogApp, cb_blogUserGuid);
GetPrevNextPost(cb_entryId, cb_blogId, cb_entryCreatedDate);
GetHistoryToday(cb_blogId, cb_blogApp, cb_entryCreatedDate);
</script>
<script type="text/javascript">
    $.ajax({ url: 'http://counter.cnblogs.com/blog/post/' + cb_entryId, type: 'get', dataType: 'script', cache: true });
</script>
</div>

	</div><!--end: forFlow -->
	</div><!--end: mainContent 主体内容容器-->

	<div id="sideBar">
		<div id="sideBarMain">
			
<!--done-->
<div class="newsItem">
<h3 class="catListTitle">公告</h3>
	<div id="blog-news"></div><script type="text/javascript">loadBlogNews();</script>
</div>

			<div id="calendar"><div id="blog-calendar" style="display:none"></div><script type="text/javascript">loadBlogDefaultCalendar();</script></div>
			
			<DIV id="leftcontentcontainer">
				<div id="blog-sidecolumn"></div><script type="text/javascript">loadBlogSideColumn();</script>
			</DIV>
			
		</div><!--end: sideBarMain -->
	</div><!--end: sideBar 侧边栏容器 -->
	<div class="clear"></div>
	</div><!--end: main -->
	<div class="clear"></div>
	<div id="footer">
		
<!--done-->
Copyright &copy;2014 上校
	</div><!--end: footer -->
</div><!--end: home 自定义的最大容器 -->
</body>
</html>
000;">"</span><span style="color: #800000;">http://localh